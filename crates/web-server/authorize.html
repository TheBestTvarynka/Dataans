<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Authorize</title>
  <script>
    async function extractAndSendToken() {
      const cookie = document.cookie
        .split('; ')
        .find(row => row.startsWith('CF_Authorization='));
      
      if (!cookie) {
        console.log("CF_Authorization cookie not found.");
        return;
      }

      const token = cookie.split('=')[1];

      console.log("Extracted token:", token);

      try {
        await window.__TAURI__.core.invoke("cf_token", { token });
        console.log("Token sent successfully:", token);
      } catch (e) {
        console.error("Failed to send token:", e);
      }
    }
  </script>
</head>
<body>
  <h2>Cloudflare Authorization</h2>
  <button onclick="extractAndSendToken()">Send Token to App</button>
</body>
</html>
